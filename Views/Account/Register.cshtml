@{
    ViewData["Title"] = "Đăng ký tài khoản";
    Layout = "_AuthLayout";
}

<h2 class="auth-title">Đăng ký tài khoản</h2>

@if (TempData["Fail"] != null)
{
    <div class="alert alert-danger mb-4">@TempData["Fail"]</div>
}
@if (TempData["Message"] != null)
{
    <div class="alert alert-success mb-4">@TempData["Message"]</div>
}

<form method="post" asp-action="Index" asp-controller="Register">
    <div class="row">
        <!-- Username -->
        <div class="col-md-6 mb-3">
            <label class="form-label">Tên đăng nhập</label>
            <input type="text" name="username" class="form-control" required pattern="^[a-zA-Z0-9]+$"
                   title="Chỉ cho phép chữ cái và số (Không có dấu)!">
        </div>
        <!-- Email -->
        <div class="col-md-6 mb-3">
            <label class="form-label">Email</label>
            <input type="email" name="email" class="form-control" required>
        </div>
    </div>

    <div class="row">
        <!-- Password -->
        <div class="col-md-6 mb-3">
            <label class="form-label">Mật khẩu</label>
            <div class="position-relative">
                <input type="password" name="password" id="password" class="form-control" required>
                <button type="button" class="btn position-absolute end-0 top-0 bg-transparent border-0" id="togglePassword">
                    <i class="bi bi-eye"></i>
                </button>
            </div>
        </div>
        <!-- Confirm Password -->
        <div class="col-md-6 mb-3">
            <label class="form-label">Xác nhận mật khẩu</label>
            <div class="position-relative">
                <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" required>
                <button type="button" class="btn position-absolute end-0 top-0 bg-transparent border-0" id="toggleConfirmPassword">
                    <i class="bi bi-eye"></i>
                </button>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- First Name -->
        <div class="col-md-6 mb-3">
            <label class="form-label">Tên</label>
            <input type="text" name="firstName" class="form-control" required>
        </div>
        <!-- Last Name -->
        <div class="col-md-6 mb-3">
            <label class="form-label">Họ</label>
            <input type="text" name="lastName" class="form-control" required>
        </div>
    </div>

    <!-- Nút đăng ký -->
    <button type="submit" class="btn btn-primary w-100 mt-3">Đăng ký</button>

    <div class="auth-links">
        Đã có tài khoản? <a href="@Url.Action("Index", "Login")">Đăng nhập</a>
    </div>
</form>

@section Scripts {
    <script>
        // Toggle password visibility for password field
        const togglePassword = document.querySelector('#togglePassword');
        const password = document.querySelector('#password');

        togglePassword.addEventListener('click', function (e) {
            const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
            password.setAttribute('type', type);

            this.querySelector('i').classList.toggle('bi-eye');
            this.querySelector('i').classList.toggle('bi-eye-slash');
        });

        // Toggle password visibility for confirm password field
        const toggleConfirmPassword = document.querySelector('#toggleConfirmPassword');
        const confirmPassword = document.querySelector('#confirmPassword');

        toggleConfirmPassword.addEventListener('click', function (e) {
            const type = confirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
            confirmPassword.setAttribute('type', type);

            this.querySelector('i').classList.toggle('bi-eye');
            this.querySelector('i').classList.toggle('bi-eye-slash');
        });
    </script>
}