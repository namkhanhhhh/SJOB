@model SJOB_EXE201.ViewModels.WorkerViewModel
@{
    ViewData["Title"] = "Home";
    Layout = "_WorkerLayout";
}

<div class="hero-section mb-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h1 class="display-4 fw-bold">Find Your Perfect Short-Term Job</h1>
                <p class="lead">Discover thousands of job opportunities that match your skills and schedule.</p>
            </div>
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-body">
                        <h5 class="card-title">Search Jobs</h5>
                        <form asp-controller="Worker" asp-action="Index" method="get">
                            <div class="mb-3">
                                <label for="keyword" class="form-label">Keyword</label>
                                <input type="text" class="form-control" id="keyword" name="keyword" value="@Model.Keyword" placeholder="Job title, skills, or company">
                            </div>
                            <div class="mb-3">
                                <label for="location" class="form-label">Location</label>
                                <input type="text" class="form-control" id="location" name="location" value="@Model.Location" placeholder="City, district, or address">
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="minSalary" class="form-label">Min Salary (per hour)</label>
                                    <input type="number" class="form-control" id="minSalary" name="minSalary" value="@Model.MinSalary" placeholder="Min">
                                </div>
                                <div class="col-md-6">
                                    <label for="maxSalary" class="form-label">Max Salary (per hour)</label>
                                    <input type="number" class="form-control" id="maxSalary" name="maxSalary" value="@Model.MaxSalary" placeholder="Max">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="jobType" class="form-label">Job Type</label>
                                <select class="form-select" id="jobType" name="jobType">
                                    <option value="">All Job Types</option>
                                    <option value="full-time" selected="@(Model.JobType == "full-time")">Full-time</option>
                                    <option value="part-time" selected="@(Model.JobType == "part-time")">Part-time</option>
                                    <option value="contract" selected="@(Model.JobType == "contract")">Contract</option>
                                    <option value="temporary" selected="@(Model.JobType == "temporary")">Temporary</option>
                                    <option value="internship" selected="@(Model.JobType == "internship")">Internship</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Search Jobs</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="container mb-5">
    <h2 class="section-title">Featured Categories</h2>
    <div class="row">
        @foreach (var category in Model.FeaturedCategories)
        {
            <div class="col-md-3 col-sm-6 mb-4">
                <a href="@Url.Action("CategoryJobs", "Worker", new { id = category.Id })" class="text-decoration-none">
                    <div class="card category-card h-100">
                        <div class="card-body text-center">
                            <i class="fas fa-briefcase category-icon mb-3"></i>
                            <h5 class="card-title">@category.Name</h5>
                            <p class="card-text small text-muted">@(category.Description?.Length > 50 ? category.Description.Substring(0, 50) + "..." : category.Description)</p>
                        </div>
                    </div>
                </a>
            </div>
        }
    </div>
</div>

<div class="container mb-5">
    <div class="row align-items-center mb-4">
        <div class="col">
            <h2 class="section-title">Premium Jobs</h2>
        </div>
        <div class="col-auto">
            <a href="#" class="btn btn-outline-primary btn-sm">View All</a>
        </div>
    </div>
    <div class="row">
        @foreach (var job in Model.DiamondPosts)
        {
            <div class="col-md-4 mb-4">
                <div class="card job-card h-100">
                    <div class="premium-badge">
                        <span class="badge bg-warning text-dark">Premium</span>
                    </div>
                    <img src="@job.ImageMain" class="card-img-top" alt="@job.Title">
                    <div class="card-body">
                        <h5 class="card-title">@job.Title</h5>
                        <p class="card-text company-name">
                            @(job.User.CompanyProfiles.FirstOrDefault()?.CompanyName ?? job.User.Username)
                        </p>
                        <p class="card-text location">
                            <i class="fas fa-map-marker-alt me-2"></i>@job.Location
                        </p>
                        <p class="card-text salary">
                            <i class="fas fa-money-bill-wave me-2"></i>
                            @(job.SalaryMin.HasValue && job.SalaryMax.HasValue 
                                ? $"{job.SalaryMin:N0} - {job.SalaryMax:N0} VND/hour" 
                                : "Negotiable")
                        </p>
                        <p class="card-text job-type">
                            <span class="badge bg-primary">@job.JobType</span>
                        </p>
                    </div>
                    <div class="card-footer bg-white">
                        <a href="@Url.Action("JobDetails", "Worker", new { id = job.Id })" class="btn btn-outline-primary w-100">View Details</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<div class="container-fluid bg-light py-5 mb-5">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-6">
                <h2>Need Help Finding the Right Job?</h2>
                <p class="lead">Our team is ready to assist you in finding the perfect job match for your skills and schedule.</p>
                <p><i class="fas fa-phone me-2"></i> Call us: <strong>+1 (123) 456-7890</strong></p>
                <p><i class="fas fa-envelope me-2"></i> Email: <strong>support@sjobplatform.com</strong></p>
            </div>
            <div class="col-md-6">
                <img src="/images/support-banner.jpg" alt="Customer Support" class="img-fluid rounded">
            </div>
        </div>
    </div>
</div>

<div class="container mb-5">
    <div class="row align-items-center mb-4">
        <div class="col">
            <h2 class="section-title">Most Viewed Jobs</h2>
        </div>
        <div class="col-auto">
            <a href="#" class="btn btn-outline-primary btn-sm">View All</a>
        </div>
    </div>
    <div class="row">
        @foreach (var job in Model.MostViewedPosts)
        {
            <div class="col-md-4 mb-4">
                <div class="card job-card h-100">
                    @if (job.ViewCount > 100)
                    {
                        <div class="popular-badge">
                            <span class="badge bg-danger">Popular</span>
                        </div>
                    }
                    <img src="@job.ImageMain" class="card-img-top" alt="@job.Title">
                    <div class="card-body">
                        <h5 class="card-title">@job.Title</h5>
                        <p class="card-text company-name">
                            @(job.User.CompanyProfiles.FirstOrDefault()?.CompanyName ?? job.User.Username)
                        </p>
                        <p class="card-text location">
                            <i class="fas fa-map-marker-alt me-2"></i>@job.Location
                        </p>
                        <p class="card-text salary">
                            <i class="fas fa-money-bill-wave me-2"></i>
                            @(job.SalaryMin.HasValue && job.SalaryMax.HasValue 
                                ? $"{job.SalaryMin:N0} - {job.SalaryMax:N0} VND/hour" 
                                : "Negotiable")
                        </p>
                        <p class="card-text job-type">
                            <span class="badge bg-primary">@job.JobType</span>
                        </p>
                        <p class="card-text views">
                            <i class="fas fa-eye me-2"></i>@job.ViewCount views
                        </p>
                    </div>
                    <div class="card-footer bg-white">
                        <a href="@Url.Action("JobDetails", "Worker", new { id = job.Id })" class="btn btn-outline-primary w-100">View Details</a>
                    </div>
                </div>
            </div>
        }
    </div>
</div>

<div class="container mb-5">
    <h2 class="section-title mb-4">All Jobs</h2>
    
    @if (!Model.AllPosts.Any())
    {
        <div class="alert alert-info">
            No jobs found matching your criteria. Please try different search parameters.
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var job in Model.AllPosts)
            {
                <div class="col-md-6 mb-4">
                    <div class="card job-card-horizontal">
                        <div class="row g-0">
                            <div class="col-md-4">
                                <img src="@job.ImageMain" class="img-fluid rounded-start h-100" alt="@job.Title" style="object-fit: cover;">
                            </div>
                            <div class="col-md-8">
                                <div class="card-body">
                                    <h5 class="card-title">@job.Title</h5>
                                    <p class="card-text company-name">
                                        @(job.User.CompanyProfiles.FirstOrDefault()?.CompanyName ?? job.User.Username)
                                    </p>
                                    <p class="card-text location">
                                        <i class="fas fa-map-marker-alt me-2"></i>@job.Location
                                    </p>
                                    <p class="card-text salary">
                                        <i class="fas fa-money-bill-wave me-2"></i>
                                        @(job.SalaryMin.HasValue && job.SalaryMax.HasValue 
                                            ? $"{job.SalaryMin:N0} - {job.SalaryMax:N0} VND/hour" 
                                            : "Negotiable")
                                    </p>
                                    <div class="d-flex justify-content-between align-items-center mt-3">
                                        <span class="badge bg-primary">@job.JobType</span>
                                        <a href="@Url.Action("JobDetails", "Worker", new { id = job.Id })" class="btn btn-sm btn-outline-primary">View Details</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        <!-- Pagination -->
        @if (Model.TotalPages > 1)
        {
            <nav aria-label="Page navigation">
                <ul class="pagination justify-content-center">
                    @if (Model.CurrentPage > 1)
                    {
                        <li class="page-item">
                            <a class="page-link" href="@Url.Action("Index", "Worker", new { 
                                page = Model.CurrentPage - 1, 
                                keyword = Model.Keyword,
                                location = Model.Location,
                                jobType = Model.JobType,
                                minSalary = Model.MinSalary,
                                maxSalary = Model.MaxSalary,
                                categoryId = Model.CategoryId
                            })" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    }

                    @for (int i = 1; i <= Model.TotalPages; i++)
                    {
                        <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                            <a class="page-link" href="@Url.Action("Index", "Worker", new { 
                                page = i, 
                                keyword = Model.Keyword,
                                location = Model.Location,
                                jobType = Model.JobType,
                                minSalary = Model.MinSalary,
                                maxSalary = Model.MaxSalary,
                                categoryId = Model.CategoryId
                            })">@i</a>
                        </li>
                    }

                    @if (Model.CurrentPage < Model.TotalPages)
                    {
                        <li class="page-item">
                            <a class="page-link" href="@Url.Action("Index", "Worker", new { 
                                page = Model.CurrentPage + 1, 
                                keyword = Model.Keyword,
                                location = Model.Location,
                                jobType = Model.JobType,
                                minSalary = Model.MinSalary,
                                maxSalary = Model.MaxSalary,
                                categoryId = Model.CategoryId
                            })" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    }
                </ul>
            </nav>
        }
    }
</div>
